{"version":3,"sources":["../../src/js/blocks-imageflipper-frontend.js"],"names":["$","theme_vars","jQuery","window","self","each","$that","this","cat","data","timeout","nextImage","$current","find","$next","next","size","siblings","eq","removeClass","addClass","setTimeout","ajax","url","ajaxurl","action","category","type","dataType","done","images","forEach","img","i","push","src","guid","class","container","append","console","log"],"mappings":"yBAAC,IAASA,EAAGC,EAAHD,EAiDRE,OAjDWD,EAiDHE,OAAOC,KAAKH,YAAc,KAAME,OAAOC,KA/CzCH,GAIPD,EAAE,kBAAkBK,KAAK,WACxB,IACCC,EAAQN,EADEO,MAEVC,EAAMF,EAAMG,KAAK,YAEjBC,EAAU,IA0BX,SAASC,IACR,IAAIC,EAAWN,EAAMO,KAAK,0BACtBC,EAAQF,EAASG,KAAK,OACnBD,EAAME,SACZF,EAAQF,EAASK,SAAS,OAAOC,GAAG,IAErCN,EAASO,YAAY,yBACrBL,EAAMM,SAAS,yBACPC,WAAWV,EAAWD,GAhCxBF,EAIPR,EAAEsB,KAAK,CACNC,IAAKtB,EAAWuB,QAChBf,KAAM,CACLgB,OAAU,yBACVC,SAAYlB,GAEbmB,KAAM,OACNC,SAAU,UACRC,KAAK,SAASpB,GAChB,IAAIqB,EAAS,GACbrB,EAAKsB,QAAQ,SAASC,EAAKC,GAC1BH,EAAOI,KAAKlC,EAAE,SAAU,CAACmC,IAAKH,EAAII,KAAMC,MAAOJ,EAAI,EAAI,wBAA0B,QAElF,IAAIK,EAAYtC,EAAE,UAClBsC,EAAUC,OAAOT,GACjBxB,EAAMiC,OAAOD,GAELjB,WAAWV,EAAWD,KApB9B8B,QAAQC,IAAI,OAAQjC","sourcesContent":["(function($, theme_vars, window, undefined) {\n\n\tif ( ! theme_vars) {\n\t\treturn;\n\t}\n\n\t$('.image-flipper').each(function() {\n\t\tvar that = this,\n\t\t\t$that = $(that),\n\t\t\tcat = $that.data('category'),\n\t\t\ttimer = null,\n\t\t\ttimeout = 2000;\n\n\t\tif ( ! cat) {\n\t\t\tconsole.log('fail', cat);\n\t\t\treturn;\n\t\t}\n\t\t$.ajax({\n\t\t\turl: theme_vars.ajaxurl,\n\t\t\tdata: {\n\t\t\t\t'action': 'get_images_by_category',\n\t\t\t\t'category': cat,\n\t\t\t},\n\t\t\ttype: 'POST',\n\t\t\tdataType: 'jsonp',\n\t\t}).done(function(data) {\n\t\t\tvar images = [];\n\t\t\tdata.forEach(function(img, i) {\n\t\t\t\timages.push($('<img/>', {src: img.guid, class: i < 1 ? 'image-flipper-current' : ''}));\n\t\t\t});\n\t\t\tvar container = $('<div/>');\n\t\t\tcontainer.append(images);\n\t\t\t$that.append(container);\n\n\t\t\ttimer = setTimeout(nextImage, timeout);\n\t\t});\n\n\t\tfunction nextImage() {\n\t\t\tvar $current = $that.find('.image-flipper-current');\n\t\t\tvar $next = $current.next('img');\n\t\t\tif ( ! $next.size()) {\n\t\t\t\t$next = $current.siblings('img').eq(0);\n\t\t\t}\n\t\t\t$current.removeClass('image-flipper-current');\n\t\t\t$next.addClass('image-flipper-current');\n\t\t\ttimer = setTimeout(nextImage, timeout);\n\t\t}\n\t});\n\n}(jQuery, window.self.theme_vars || null, window.self));"]}